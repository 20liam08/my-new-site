<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <title>ØµÙØ­Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª - Sholl Shop</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1 onclick="window.location.href='index.html'" style="cursor: pointer;">Sholl Shop - Ù…Ø¯ÛŒØ±ÛŒØª</h1>
        <nav>
            <a href="index.html">ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</a>
            <a href="products.html">Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
            <a href="cart.html">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</a>
            <a href="admin.html">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</a>
        </nav>
    </header>

    <main class="admin-main">
        <!-- ÙØ±Ù… ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª -->
        <div id="loginForm" class="admin-login">
            <h2>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
            <input type="text" id="adminUser" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
            <input type="password" id="adminPass" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
            <button onclick="adminLogin()">ÙˆØ±ÙˆØ¯</button>
        </div>

        <!-- Ø¬Ø¯ÙˆÙ„ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ - Ø¨Ø¹Ø¯ Ø§Ø² ÙˆØ±ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒØ´Ù‡ -->
        <div id="ordersSection" class="orders-section" style="display: none;">
            <h2>Ù„ÛŒØ³Øª Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</h2>
            <button onclick="exportToExcel()" style="margin-bottom: 10px;">Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨ØµÙˆØ±Øª Excel</button>
            <table id="ordersTable" border="1" class="order-table">
                <thead>
                    <tr>
                        <th>Ù†Ø§Ù…</th>
                        <th>Ù…ÙˆØ¨Ø§ÛŒÙ„</th>
                        <th>Ø¢Ø¯Ø±Ø³</th>
                        <th>Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª</th>
                        <th>Ú©Ø¯ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ</th>
                        <th>ØªØ§Ø±ÛŒØ®</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        // ğŸ‘ï¸â€ğŸ—¨ï¸ Ù†Ù…Ø§ÛŒØ´ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ ÙÙ‚Ø· Ø§Ú¯Ø± Ù„Ø§Ú¯ÛŒÙ† Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ù‡
        window.onload = () => {
            const isAdminLoggedIn = localStorage.getItem('isAdminLoggedIn');

            if (isAdminLoggedIn === 'true') {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('ordersSection').style.display = 'block';

                showOrders();
            } else {
                document.getElementById('ordersSection').style.display = 'none';
                document.getElementById('loginForm').style.display = 'block';
            }
        };

        // ğŸ” ØªØ§Ø¨Ø¹ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª
        function adminLogin() {
            const username = document.getElementById('adminUser').value.trim();
            const password = document.getElementById('adminPass').value.trim();

            if (username === "admin" && password === "1234") {
                localStorage.setItem('isAdminLoggedIn', 'true');
                alert("ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚!");
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('ordersSection').style.display = 'block';
                showOrders();
            } else {
                alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª.");
            }
        }

        // ğŸ“‹ Ù†Ù…Ø§ÛŒØ´ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ Ø¯Ø± Ø¬Ø¯ÙˆÙ„
        function showOrders() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const tableBody = document.querySelector("#ordersTable tbody");

            if (orders.length === 0) {
                tableBody.innerHTML = "<tr><td colspan='6'>Ø³ÙØ§Ø±Ø´ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</td></tr>";
                return;
            }

            orders.forEach(order => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${order.name}</td>
                    <td>${order.phone}</td>
                    <td>${order.address}</td>
                    <td>${order.payment === 'online' ? 'Ø¢Ù†Ù„Ø§ÛŒÙ†' : 'Ø¯Ø± Ù…Ø­Ù„'}</td>
                    <td>${order.trackingCode}</td>
                    <td>${order.date}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¨ØµÙˆØ±Øª CSV (Ø§Ú©Ø³Ù„)
        function exportToExcel() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];

            if (orders.length === 0) {
                alert("Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.");
                return;
            }

            let csvContent = "Ù†Ø§Ù…,Ù…ÙˆØ¨Ø§ÛŒÙ„,Ø¢Ø¯Ø±Ø³,Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª,Ú©Ø¯ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ,ØªØ§Ø±ÛŒØ®\n";

            orders.forEach(order => {
                csvContent += `${order.name},${order.phone},"${order.address}",${order.payment === 'online' ? 'Ø¢Ù†Ù„Ø§ÛŒÙ†' : 'Ø¯Ø± Ù…Ø­Ù„'},${order.trackingCode},${order.date}\n`;
            });

            // â¬‡ï¸ Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ CSV
            const hiddenLink = document.createElement("a");
            hiddenLink.href = "data:text/csv;charset=utf-8," + encodeURIComponent(csvContent);
            hiddenLink.download = "Ø³ÙØ§Ø±Ø´Ø§Øª.csv";
            document.body.appendChild(hiddenLink);
            hiddenLink.click();
            document.body.removeChild(hiddenLink);
        }
    </script>
</body>
</html>